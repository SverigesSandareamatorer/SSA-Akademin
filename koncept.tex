%\documentclass[a4paper,twoside,openright,10pt]{memoir}
\documentclass[10pt,openright]{report}
\usepackage[utf8]{inputenc}

\usepackage{tabularx}

%% k7per: Uncomment this line if you want a black box at each overfull hbox
% \overfullrule=10pt

\synctex=1
\usepackage{xtab}

\include{koncept/common}
\usepackage[swedish]{babel}
% \usepackage{paralist}
\usepackage{balance}

\usepackage[
  activate={true,nocompatibility},
  final,
  tracking=true,
  factor=1000,
  stretch=40,
  shrink=20,
  babel=true
]{microtype}

\usepackage[a4paper,twoside,twocolumn,inner=2.2cm,outer=1.9cm,columnsep=0.9cm,top=2cm,bottom=2cm]{geometry}
%% k7per
\usepackage{stfloats}
% \usepackage{blindtext, subfig}

\newcommand{\erp}{ERP}
\newcommand{\eirp}{EIRP}
\newcommand{\pep}{PEP}
\newcommand{\signal}[1]{\texttt{#1}}

%% k7per: The harecsection macro is used to enclose a list of harec commands, it also takes care of making
%% sure the paragraph afterwards in no indenented, making sections with harec tags look the sme as sections
%% without.
\makeatletter
\def\harecsection#1{\begingroup\raggedleft\scriptsize HAREC #1\par\endgroup\@afterindentfalse\@afterheading}
\makeatother
% \def\harec#1#2#3{\textbf{#1.\ref{HAREC.#1.#2}}\label{myHAREC.#1.#3}}
\def\harec#1#2#3{{\scriptsize#1.#2\label{myHAREC.#1.#3}}}

\makeatletter
\providecommand\add@text{}
\newcommand\tagaddtext[1]{%
  \gdef\add@text{#1\gdef\add@text{}}}% 
\renewcommand\tagform@[1]{%
  \maketag@@@{\llap{\add@text\quad}(\ignorespaces#1\unskip\@@italiccorr)}%
}
\makeatother

% \usepackage{dblfloatfix}
\usepackage{float}
\usepackage{placeins}
\usepackage{array}
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}p{#1}}

\usepackage{fancyhdr}
\pagestyle{fancy}
\lhead{}
\chead{}
\rhead{}
\cfoot{}
\fancyfoot[LE,RO]{\thepage}
\renewcommand{\headrulewidth}{0pt}

%% This fixes page numbering on chapter head pages
\fancypagestyle{plain}{
  \fancyhf{}
  \fancyfoot[LE,RO]{\thepage}
  \renewcommand{\headrulewidth}{0pt}}

\renewcommand{\bfdefault}{b}
\SetMathAlphabet{\mathbf}{normal}{OT1}{cmr}{b}{n}

\usepackage[raggedright]{titlesec}
\titlespacing{\chapter}{0pt}{1cm}{1cm}
%%\titleformat{\chapter}[hang]{\Huge\bfseries}{\thechapter\hsp\textcolor{gray75}{|}\hsp}{0pt}{\Huge\bfseries}
\titleformat{\chapter}[hang]{\Huge\bfseries}{\fcolorbox{black}{black}{\color{white}\,\thechapter\,}~~}{0pt}{\Huge\bfseries}

%%\headheight = 12.6pt

%% \setsecnumdepth{subsection}
\setcounter{secnumdepth}{3}

% Figure macros
\newcommand{\bottomwidefigure}[4][0.6]{
  \begin{figure*}[b]
    \centering
    \includegraphics[width=#1\textwidth]{#2}
    \caption{#3}
    \label{#4}
    \vspace{-10pt}
  \end{figure*}
}

\newcommand{\smallfig}[4][0.4]{
  \begin{figure}[t]
    \centering
    \includegraphics[width=#1\textwidth]{#2}
    \caption{#3}
    \label{#4}
    \vspace{-10pt}
  \end{figure}
}

% Figure macros
\newcommand{\smallpagefig}[4][0.4]{
  \begin{figure*}[p]
    \centering
    \includegraphics[width=#1\textwidth]{#2}
    \caption{#3}
    \label{#4}
    \vspace{-10pt}
  \end{figure*}
}

\newcommand{\multifig}[4][0.4]{
  \begin{figure}[ht]
    \centering
    \foreach \i in {#2} {
      \includegraphics[width=#1\textwidth]{\i}
    }
    \caption{#3}
    \label{#4}
    \vspace{-10pt}
  \end{figure}
}

\newcommand{\pagemultifig}[4][0.4]{
  \begin{figure}[pbt]
    \centering
    \foreach \i in {#2} {
      \includegraphics[width=#1\textwidth]{\i}
    }
    \caption{#3}
    \label{#4}
    \vspace{-10pt}
  \end{figure}
}

\newcommand{\tallfig}[4][0.4]{
  \begin{figure}
    \centering
    \includegraphics[width=#1\textwidth]{#2}
    \caption{#3}
    \label{#4}
    \vspace{-10pt}
  \end{figure}
}

\newcommand{\mediumfig}[4][0.7]{
  \begin{figure*}[bt]
    \begin{center}
      \includegraphics[width=#1\textwidth]{#2}
      \caption{#3}
      \label{#4}
    \end{center}
  \end{figure*}
}

\newcommand{\mediumbotfig}[4][0.7]{
  \begin{figure*}[b]
    \begin{center}
      \includegraphics[width=#1\textwidth]{#2}
      \caption{#3}
      \label{#4}
    \end{center}
  \end{figure*}
}
\newcommand{\mediumminusbotfig}[4][0.6]{
  \begin{figure*}[b]
    \begin{center}
      \includegraphics[width=#1\textwidth]{#2}
      \caption{#3}
      \label{#4}
    \end{center}
  \end{figure*}
}

\newcommand{\mediumtopfig}[4][0.7]{
  \begin{figure*}[t]
    \begin{center}
      \includegraphics[width=#1\textwidth]{#2}
      \caption{#3}
      \label{#4}
    \end{center}
  \end{figure*}
}

\newcommand{\mediumminustopfig}[4][0.6]{
  \begin{figure*}[t]
    \begin{center}
      \includegraphics[width=#1\textwidth]{#2}
      \caption{#3}
      \label{#4}
    \end{center}
  \end{figure*}
}

\newcommand{\mediumplustopfig}[4][0.8]{
  \begin{figure*}[t]
    \begin{center}
      \includegraphics[width=#1\textwidth]{#2}
      \caption{#3}
      \label{#4}
    \end{center}
  \end{figure*}
}

\newcommand{\mediumplusbotfig}[4][0.8]{
  \begin{figure*}[b]
    \begin{center}
      \includegraphics[width=#1\textwidth]{#2}
      \caption{#3}
      \label{#4}
    \end{center}
  \end{figure*}
}

\newcommand{\medfig}[4]{
  \begin{figure*}[t]
    \begin{center}
      \includegraphics[width=#1\textwidth]{#2}
      \caption{#3}
      \label{#4}
    \end{center}
  \end{figure*}
}

\newcommand{\pagefig}[4][0.7]{
  \begin{figure*}[pbt]
    \begin{center}
      \includegraphics[width=#1\textwidth]{#2}
      \caption{#3}
      \label{#4}
    \end{center}
  \end{figure*}
}

\newcommand{\hpfig}[4][0.6]{
  \onecolumn
  \begin{figure}[h]
    \begin{center}
      \includegraphics[width=#1\textwidth]{#2}
      \caption{#3}
      \label{#4}
    \end{center}
  \end{figure}
  \twocolumn
}

\newcommand{\largefig}[4][0.9]{
  \begin{figure*}
    \begin{center}
      \includegraphics[width=#1\textwidth]{#2}
      \caption{#3}
      \label{#4}
    \end{center}
  \end{figure*}
}

\newcommand{\smalltikz}[3]{
  \begin{figure}[t]
    \begin{center}
      #1
      \caption{#2}
      \label{#3}
    \end{center}
    \vspace{-20pt}
  \end{figure}
}

\newsavebox\TBox
\def\textoverline#1{\savebox\TBox{#1}%
  \makebox[0pt][l]{#1}\rule[1.1\ht\TBox]{\wd\TBox}{0.4pt}}

\usepackage[textfont=sf,labelfont={bf, sf},margin=10pt]{caption}

\usepackage{threeparttable}
\usepackage[symbol]{footmisc}
\usepackage{morse}
\usepackage{scalerel}

%\def\frdjp{\textbf{FÖRDJUPNING}}
\def\frdjp{}
  
% \makechapterstyle{ssa}{%
%   \chapterstyle{default}
%   \chapterstyle{article}%
%   %\renewcommand*{\thechapter}{\Roman{chapter}}
%   \renewcommand*{\printchapternum}{% center number/title
%     \centering\chapnumfont \textsc\thechapter\space\space}%
%   \renewcommand*{\printchapternonum}{\centering}
%   %\renewcommand*{\clearforchapter}{}% no new page
%   \aliaspagestyle{chapter}{headings}}% no special pagestyle

%% \semiisopage[12]

% Prepare for abstract
%\pagestyle{plain}
%\newenvironment{abstract}%
%{\cleardoubblanklepage\null \vfill\begin{center}\bfseries Abstract \end{center}}%
%{\cleardoublepage\null \vfill\begin{center}%
%\bfseries \abstractname \end{center}}%
%     {\vfill\null}

%% k7per: förbättringar till avstavningsregler.  Lägg till här, inte i den löpande texten.
%% Enda undantaget skulle vara ord med streck i, till vi får en bra lösning på det, babel's "- kanske.
\hyphenation{
  amatör-ra-dio-signaler
  amatör-radio-certi-fikat
  amatör-radio-sänd-ar-en
  an-tenn-sys-tem
  antenn-ens
  bär-vågs-am-pli-tud
  efter-som
  el-ek-tro-mag-net-isk
  elektronrörs-epoken
  extra-isolerad
  fas-änd-ring-en
  for-mel-snu-r-r-an
  fre-kvens-mod-ul-ati-on
  frekvens-karaktäristiken
  frekvens-ändring
  för-utom
  halv-led-ar-ele-ment
  impedans-anpassade
  ko-ax-ial-kab-el-arrangemang
  kvarts-kristaller
  mat-nings-im-pe-den-sen
  materie-formerna
  MAY-DAY
  min-d-re
  mo-du-ler-ing
  nät-an-slu-ten
  o-läm-p-li-gt
  puls-kod-mo-du-la-tion
  puls-läng-ds
  radio-vågor
  re-so-nans-krets
  serie-kretsen
  skarv-sladdar
  sys-tem-jord
  tantal-elek-tro-lyt-kondensatorer
  var-an-d-ra
  våg-av-böj-ning
  vä-xel-st-rö-m-s-krets
}

\setcounter{tocdepth}{1}
\usepackage{tocloft}
\setlength\cftsecnumwidth{3em}

% Prepare for index
\usepackage{makeidx}
\makeindex

\usepackage[black,sfdefault]{sourcesanspro}

\begin{document}

%% \chapterstyle{ssa}

% Frontpage
\include{koncept/frontpage}

% Colophone

%% Tryckortssidan
\include{koncept/tryckort}
\pagenumbering{gobble}

% \lfoot[\revision]{}
% \rfoot[]{\revision}

\cleardoublepage
%\pagestyle{fancy}

%\title{KONCEPT FÖR RADIOAMATÖRCERTIFIKAT}
%\author{Lennart Wiberg}
%\maketitle

\tableofcontents

% \setlength{\parindent}{0pt}
% \setlength{\parskip}{1ex plus 0.5ex minus 0.2ex}
 
%%\mainmatter

\include{koncept/preface}
\include{koncept/foreword}
\include{koncept/introduction}

\cleardoublepage
\pagenumbering{arabic}
\setcounter{page}{5}

\input{koncept/koncept-core}

%% k7per, why?
% \listoffigures
% \listoftables

%% k7per: Allowing references to be ragged.  May need URL hyphen package also.
\onecolumn
\begin{flushleft}
\bibliography{koncept.bib}
\bibliographystyle{plain}
\end{flushleft}

%%\backmatter

\printindex

\newcommand*\cleartoleftpage{%
  \clearpage
  \ifodd\value{page}\hbox{}\newpage\fi
}

\cleartoleftpage

\input{koncept/backpage}

\end{document}
