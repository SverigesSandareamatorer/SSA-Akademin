%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  KonCEPT för amatörradiocertifikat  %
% Föreningen Sveriges Sändareamatörer %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% LaTeX-dokument behöver ha en klass. report är snarlik book.
\documentclass[10pt,openright]{report}

% Sätt sidstorlek och marginaler.
\usepackage[
	a4paper,
	twoside,
	twocolumn,
	inner=2.2cm,
	outer=1.9cm,
	columnsep=0.9cm,
	top=2cm,
	bottom=2cm
]{geometry}

% Kunna generera bl.a. svenska tecken.
\usepackage[T1]{fontenc}

% Tillåt bl.a. svenska tecken (UTF-8) i källkoden.
\usepackage[utf8]{inputenc}

% Svenska: format, avstavning m.m.
\usepackage[swedish]{babel}
\extrasswedish

% Paketet definierar en miljö tabularx, en förlängning av tabulär som har en
% extra kolumnbeteckning, X, som skapar en styckeliknande kolumn vars bredd
% automatiskt expanderar så att den deklarerade bredden av miljön fylls.
\usepackage{tabularx}

%% k7per: Uncomment this line if you want a black box at
%% each overfull hbox, comment for product.
%% \overfullrule=10pt

% Gör så att position i PDF-fönster synkas med rad i källkoden i vissa
% LaTeX-editorer.
\synctex=1

% Paket för att dela tabeller över flera sidor.
\usepackage{xtab}

% Ett intelligent kommatecken, som ger rätt avstånd i decimaltal såväl som i
% matematiska uttryck.
\usepackage{icomma}

% Latin Modern-familjen av teckensnitt består av 72 textteckensnitt och 20
% matematiska teckensnitt, och är baserad på Computer Modern-typsnitt som
% släppts till allmän egendom av AMS. Typsnittsuppsättningen lm innehåller många
% extra tecken, främst accentuerade, men inte enbart.
\usepackage{lmodern}

% Paket för att skapa bokmärken i PDF med numrering.
\usepackage[numbered]{bookmark}

% Ändra bildtexten till "Bild" på svenska.
\addto\captionsswedish{\renewcommand{\figurename}{Bild}}

% För avancerad typsättning av matematiska uttryck.
\usepackage{amsmath}
\usepackage{amsfonts}

% Paket för att skapa ramar runt text.
\usepackage{framed}

% Paket för att hantera färger.
\usepackage{color}

% Markera text med gul bakgrund.
\newcommand{\hilight}[1]{\colorbox{yellow}{#1}}

% Paket för att hantera avsnittsrubriker.
\usepackage[toctitles,raggedright]{titlesec}

% Aktivera möjligheten att länka i PDF:en.
\usepackage{hyperref}
\hypersetup{
	pdftitle={KonCEPT för amatörradiocertifikat},
	pdfauthor={Föreningen Sveriges Sändareamatörer},
	pdfkeywords={Sveriges Sändareamatörer, SSA, amatörradio},
	pdflang={sv},
	colorlinks,
	citecolor=black,
	filecolor=black,
	linkcolor=black,
	urlcolor=black
}

% Tillhandahåller generiska kommandon \degree, \celsius, \perthousand, \micro
% och \ohm som fungerar både i text- och matematikläge.
\usepackage{gensymb}

% Paket för att typsätta SI-enheter och värden. Används oftast med makron \qty
% samt \unit.
\usepackage{siunitx}
\sisetup{
	output-decimal-marker = {,},
	product-symbol = \cdot,
	retain-explicit-plus = true,
	product-units = single,
	per-mode = symbol,
	range-units = single,
	range-phrase = {--},
	separate-uncertainty=true,
	multi-part-units=single
}

% Möjliggör att kunna skriva ut SI-prefix utan enhet t.ex. \unit{\kilo\noop}
\DeclareSIUnit\noop{\relax}

%% k7per: Swap these two definitions if you want a small Orange blob
%% behind the ref locations for ease of layout work.
\newcommand\ssaref[1]{\ref{#1}}
%% \newcommand\ssaref[1]{\setlength{\fboxsep}{0pt}\colorbox{Orange}{\ref{#1}}}

% Makro för varningssymbol - skapar en triangel med centrerat utropstecken med TikZ
\newcommand\warningsymbol{%
  \tikz[baseline=-0.1ex]{
    \draw[thick] (0,0) -- (0.4,0.7) -- (0.8,0) -- cycle;
    \node at (0.4,0.25) {\Large\textbf{!}};
  }%
}

% \clubpenalty: Förhindrar att en ensam rad hamnar längst ned på en sida.
% \widowpenalty: Förhindrar att en ensam rad hamnar överst på en sida.
% \brokenpenalty: Minskar sannolikheten för sidbrytning efter avstavade rader.
\clubpenalty=9990
\widowpenalty=9999
\brokenpenalty=4999

% En uppsättning makron för naturlig typsättning av elektriska och elektroniska
% nätverk. Används till kretsdiagram.
\usepackage[
	european,
	nooldvoltagedirection,
	cuteinductors,
	smartlabels
]{circuitikz}

% Skapa tabellceller som spänner över flera rader.
\usepackage{multirow}

% Detta paket ger användarkontroll över layouten för de tre grundläggande
% listmiljöerna: enumerate, itemize and description.
\usepackage{enumitem}

% Paketet bygger på paketet graphics och tillhandahåller ett
% nyckel-värde-gränssnitt för valfria argument till kommandot \includegraphics.
% Detta gränssnitt ger faciliteter som går långt utöver vad paketet graphics
% erbjuder på egen hand.
\usepackage{graphicx}

% (Beskrivning saknas.)
\raggedbottom

% Läs in information från versionshanteringen så att den finns tillgänglig
% för sidan med tryckinformation.
\usepackage{xstring}
\usepackage{catchfile}
\CatchFileDef{\HEAD}{SHA.tmp}{}
\CatchFileDef{\branch}{branch.tmp}{}
\newcommand{\gitrevision}{
	\StrLeft{\HEAD}{7}
}
\CatchFileDef{\VERSION}{VERSION.txt}{}
\newcommand{\revision}{
	\VERSION (\branch \gitrevision)
}

% Paketet ger stöd för att skapa streckkoder av ISBN-numret i EAN-13-format.
\usepackage[ISBN=978-91-86368-23-4,SC3]{ean13isbn}

% Gör så att båda kolumnerna på sista sidan i ett kapitel är lika höga.
% Aktiveras med \balance i första kolumnen på sista sidan.
\usepackage{balance}

% Paketet gör små förändringar i teckenjusteringen så raderna passar bättre.
\usepackage[
	activate={true,nocompatibility},
	final,
	tracking=true,
	factor=1000,
	stretch=44,
	shrink=20,
	babel=true
]{microtype}

% (Beskrivning saknas.)
\usepackage{stfloats}

% Hjälpmakron för att dessa förkortningar/uttryck ska skrivas konsekvent genom
% hela boken.
\newcommand{\erp}{ERP}
\newcommand{\eirp}{EIRP}
\newcommand{\pep}{PEP}

% Definiera ett kommando för att formatera text som en signal (monospace-typsnitt).
\newcommand{\signal}[1]{\texttt{#1}}

% k7per: The harecsection macro is used to enclose a list of harec commands, it
% also takes care of making sure the paragraph afterwards in no indenented,
% making sections with harec tags look the sme as sections without.
\makeatletter
\def\harecsection#1{\begingroup\raggedleft\scriptsize HAREC #1\par\endgroup\@afterindentfalse\@afterheading}
\makeatother
% \def\harec#1#2#3{\textbf{#1.\ref{HAREC.#1.#2}}\label{myHAREC.#1.#3}}
\def\harec#1#2#3{{\scriptsize#1.#2\label{myHAREC.#1.#3}}}

\makeatletter
\providecommand\add@text{}
\newcommand\tagaddtext[1]{
  \gdef\add@text{#1\gdef\add@text{}}}
\renewcommand\tagform@[1]{
  \maketag@@@{\llap{\add@text\quad}(\ignorespaces#1\unskip\@@italiccorr)}
}
\makeatother

% Paket för att placera figurer och tabeller.
\usepackage{float}

% Defines a \FloatBarrier command, beyond which floats may not pass; useful, for
% example, to ensure all floats for a section appear before the next \section
% command.
\usepackage{placeins}

% An extended implementation of the array and tabular environments which extends
% the options for column formats, and provides "programmable" format
% specifications.
\usepackage{array}

% Används till ramen runt räkneexempel och historiebeskrivningar.
\usepackage{tcolorbox}
\tcbuselibrary{skins,breakable}
\newtcolorbox{exempelbox}{enhanced,breakable,leftrule=2mm}
\newtcolorbox{historiabox}{enhanced,breakable,oversize,title=Historia,halign title=center}

% Gör QR-koder.
\usepackage{qrcode}

% Definierar en ny kolumntyp 'L' för tabellmiljöer, som skapar en styckekolumn med angiven bredd (#1),
% vänsterjusterar innehållet (ragged right), tillåter radbrytning med '\\', och säkerställer korrekt avstånd i slutet av kolumnen.
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}p{#1}}

% Paketet ger omfattande möjligheter, både för att konstruera sidhuvuden och
% sidfötter, och för att kontrollera deras användning.
\usepackage{fancyhdr}
\pagestyle{fancy}
\lhead{}
\chead{}
\rhead{}
\cfoot{}
\fancyfoot[LE,RO]{\thepage}
\renewcommand{\headrulewidth}{0pt}

% This fixes page numbering on chapter head pages.
\fancypagestyle{plain}{
	\fancyhf{}
	\fancyfoot[LE,RO]{\thepage}
	\renewcommand{\headrulewidth}{0pt}
}

\renewcommand{\bfdefault}{b}
\SetMathAlphabet{\mathbf}{normal}{OT1}{cmr}{b}{n}

\usepackage[raggedright]{titlesec}
\titlespacing{\chapter}{0pt}{1cm}{1cm}
%%\titleformat{\chapter}[hang]{\Huge\bfseries}{\thechapter\hsp\textcolor{gray75}{|}\hsp}{0pt}{\Huge\bfseries}
\titleformat{\chapter}[hang]{\Huge\bfseries}{\fcolorbox{black}{black}{\color{white}\,\thechapter\,}~~}{0pt}{\Huge\bfseries}

% Ge delavsnitt \subsubsection numreringssiffra.
\setcounter{secnumdepth}{3}

% Figure macros
\newcommand{\bottomwidefigure}[4][0.6]{
    \begin{figure*}[b]
        \centering
        \includegraphics[width=#1\textwidth]{#2}
        \caption{#3}
        \label{#4}
        \vspace{-10pt}
    \end{figure*}
}

\newcommand{\smallfig}[4][0.4]{
  \begin{figure}[t]
    \centering
    \includegraphics[width=#1\textwidth]{#2}
    \caption{#3}
    \label{#4}
    \vspace{-10pt}
  \end{figure}
}

\newcommand{\smallbotfig}[4][0.4]{
  \begin{figure}[t]
    \centering
    \includegraphics[width=#1\textwidth]{#2}
    \caption{#3}
    \label{#4}
    \vspace{-10pt}
  \end{figure}
}

% test om det går att få en figur längst ner i spalt
\newcommand{\smallbotfigtwo}[4][0.4]{
	\begin{figure}[bht]
		\centering
		\includegraphics[width=#1\textwidth]{#2}
		\caption{#3}
		\label{#4}
		\vspace{-10pt}
	\end{figure}
}

\newcommand{\smallfigpad}[4][0.4]{
  \begin{figure}[t]
    \begin{center}
    \bigskip
    \includegraphics[width=#1\textwidth]{#2}
    \caption{#3}
    \label{#4}
    \vspace{-10pt}
    \end{center}
  \end{figure}
}

% Figure macros
\newcommand{\smallpagefig}[4][0.4]{
  \begin{figure*}[p]
    \centering
    \includegraphics[width=#1\textwidth]{#2}
    \caption{#3}
    \label{#4}
    \vspace{-10pt}
  \end{figure*}
}

\newcommand{\multifig}[4][0.4]{
  \begin{figure}[ht]
    \centering
    \foreach \i in {#2} {
      \includegraphics[width=#1\textwidth]{\i}
    }
    \caption{#3}
    \label{#4}
    \vspace{-10pt}
  \end{figure}
}

\newcommand{\pagemultifig}[4][0.4]{
  \begin{figure}[pbt]
    \centering
    \foreach \i in {#2} {
      \includegraphics[width=#1\textwidth]{\i}
    }
    \caption{#3}
    \label{#4}
    \vspace{-10pt}
  \end{figure}
}

\newcommand{\talltopfig}[4][0.4]{
  \begin{figure*}[t]
    \centering
    \includegraphics[width=#1\textwidth]{#2}
    \caption{#3}
    \label{#4}
    \vspace{-10pt}
  \end{figure*}
}

\newcommand{\tallfig}[4][0.4]{
  \begin{figure}
    \centering
    \includegraphics[width=#1\textwidth]{#2}
    \caption{#3}
    \label{#4}
    \vspace{-10pt}
  \end{figure}
}

\newcommand{\mediumfig}[4][0.7]{
  \begin{figure*}[bt]
    \begin{center}
      \includegraphics[width=#1\textwidth]{#2}
      \caption{#3}
      \label{#4}
    \end{center}
  \end{figure*}
}

\newcommand{\mediumfigpad}[4][0.7]{
  \begin{figure*}[bt]
    \begin{center}
      \bigskip
      \includegraphics[width=#1\textwidth]{#2}
      \caption{#3}
      \label{#4}
    \end{center}
  \end{figure*}
}

\newcommand{\mediumbotfig}[4][0.7]{
  \begin{figure*}[b]
    \begin{center}
      \includegraphics[width=#1\textwidth]{#2}
      \caption{#3}
      \label{#4}
    \end{center}
  \end{figure*}
}
\newcommand{\mediumminusbotfig}[4][0.6]{
  \begin{figure*}[b]
    \begin{center}
      \includegraphics[width=#1\textwidth]{#2}
      \caption{#3}
      \label{#4}
    \end{center}
  \end{figure*}
}

\newcommand{\mediumtopfig}[4][0.7]{
  \begin{figure*}[t]
    \begin{center}
      \includegraphics[width=#1\textwidth]{#2}
      \caption{#3}
      \label{#4}
    \end{center}
  \end{figure*}
}

\newcommand{\mediumherefig}[4][0.7]{
  \begin{figure*}[h!]
    \begin{center}
      \includegraphics[width=#1\textwidth]{#2}
      \caption{#3}
      \label{#4}
    \end{center}
  \end{figure*}
}

\newcommand{\mediumminustopfig}[4][0.6]{
  \begin{figure*}[t]
    \begin{center}
      \includegraphics[width=#1\textwidth]{#2}
      \caption{#3}
      \label{#4}
    \end{center}
  \end{figure*}
}

\newcommand{\mediumplustopfig}[4][0.8]{
  \begin{figure*}[t]
    \begin{center}
      \includegraphics[width=#1\textwidth]{#2}
      \caption{#3}
      \label{#4}
    \end{center}
  \end{figure*}
}

\newcommand{\mediumplusbotfig}[4][0.8]{
  \begin{figure*}[b]
    \begin{center}
      \includegraphics[width=#1\textwidth]{#2}
      \caption{#3}
      \label{#4}
    \end{center}
  \end{figure*}
}

\newcommand{\medfig}[4]{
  \begin{figure*}[t]
    \begin{center}
      \includegraphics[width=#1\textwidth]{#2}
      \caption{#3}
      \label{#4}
    \end{center}
  \end{figure*}
}

\newcommand{\pagefig}[4][0.7]{
  \begin{figure*}[pbt]
    \begin{center}
      \includegraphics[width=#1\textwidth]{#2}
      \caption{#3}
      \label{#4}
    \end{center}
  \end{figure*}
}

\newcommand{\hpfig}[4][0.6]{
  \onecolumn
  \begin{figure}[h]
    \begin{center}
      \includegraphics[width=#1\textwidth]{#2}
      \caption{#3}
      \label{#4}
    \end{center}
  \end{figure}
  \twocolumn
}

\newcommand{\largefig}[4][0.9]{
  \begin{figure*}
    \begin{center}
      \includegraphics[width=#1\textwidth]{#2}
      \caption{#3}
      \label{#4}
    \end{center}
  \end{figure*}
}

\newcommand{\smalltikz}[3]{
  \begin{figure}[t]
    \begin{center}
      #1
      \caption{#2}
      \label{#3}
    \end{center}
    \vspace{-20pt}
  \end{figure}
}
\newcommand{\smalltikzfloat}[3]{
  \begin{figure*}[t]
    \begin{center}
      #1
      \caption{#2}
      \label{#3}
    \end{center}
    \vspace{-20pt}
  \end{figure*}
}

\newcommand{\mediumtikz}[3]{
  \begin{figure*}[t]
    \begin{center}
      \resizebox{0.6\textwidth}{!}{%
        #1
        }%
      \caption{#2}
      \label{#3}
    \end{center}
    \vspace{-20pt}
  \end{figure*}
}

% (Beskrivning saknas.)
\newsavebox\TBox
\def\textoverline#1{\savebox\TBox{#1}
  \makebox[0pt][l]{#1}\rule[1.1\ht\TBox]{\wd\TBox}{0.4pt}}

% Paket för att hantera bildtexter.
\usepackage[textfont=sf,labelfont={bf, sf},margin=10pt]{caption}

% Tillhandahåller ett schema för tabeller som har en strukturerad
% anteckningssektion, efter bildtexten.
\usepackage{threeparttable}

% Paket för att hantera fotnoter.
\usepackage[symbol]{footmisc}

% Paket för att hantera Morse-kod.
\usepackage{morse}

% Paketet innehåller fyra kommandon för vertikal skalning och sträckning av
% föremål. Dess primära funktion är förmågan att skala/sträcka och flytta ett
% objekt för att anpassa sig till storleken på ett specificerat andra objekt.
% Denna funktion kan vara användbar i både ekvationer och schematiska diagram.
% Dessutom erbjuder skalnings- och sträckningskommandona begränsningar för
% maximal bredd och/eller minsta bildförhållande, som ofta används för att
% bevara läsbarheten eller för det allmänna utseendets skull.
\usepackage{scalerel}

% Avstavningsregler -- lägg till här, inte i den löpande texten. Enda undantaget
% skulle vara ord med streck i, till vi får en bra lösning på det, babel's "- kanske.
\hyphenation{
	amatör-ra-dio-signaler
	amatör-radio-certi-fikat
	amatör-radio-sänd-ar-en
	an-tenn-sys-tem
	antenn-ens
	bär-vågs-am-pli-tud
	efter-som
	el-ek-tro-mag-net-isk
	el-ek-tron-rör
	elektronrörs-epoken
	extra-isolerad
	fas-änd-ring-en
	for-mel-snu-r-r-an
	fre-kvens-mod-ul-ati-on
	frekvens-karaktäristiken
	frekvens-ändring
	för-utom
	halv-led-ar-ele-ment
	impedans-anpassade
	kant-vå-gor
	ko-ax-ial-kab-el-arrangemang
	kvarts-kristaller
	mat-nings-im-pe-den-sen
	materie-formerna
	mat-nings-im-pe-dan-sen
	MAY-DAY
	mik-ro-vå-gor
	min-d-re
	mo-du-ler-ing
	nät-an-slu-ten
	o-läm-p-li-gt
	puls-kod-mo-du-la-tion
	puls-läng-ds
	radio-vågor
	re-so-nans-krets
	serie-kretsen
	skarv-sladdar
	sys-tem-jord
	tantal-elek-tro-lyt-kondensatorer
	var-an-d-ra
	våg-av-böj-ning
	vä-xel-st-rö-m-s-krets
}

% Begränsa antalet nivåer i innehållsförteckningen.
\setcounter{tocdepth}{1}

% Ger kontroll över typografin i innehållsförteckningen, figurlistan och
% tabelllistan, och möjligheten att skapa en ny "lista över ...".
% Innehållsförteckningen \parskip kan ändras.
\usepackage{tocloft}

% Ställer in bredden på numreringsfältet för sektioner i innehållsförteckningen till 3 em.
\setlength\cftsecnumwidth{3em}

% Standardpaket för att skapa index. Används till sakregistret.
\usepackage{makeidx}
\makeindex

% Paket för att använda teckensnittet Source Sans Pro.
\usepackage[black]{sourcesanspro}

% Här slutar inställningarna.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Här börjar innehållet.
\begin{document}
%
% Infoga framsidan och tryckortssidan.
\include{koncept/frontpage}
\include{koncept/tryckort}
%
% (Beskrivning saknas.)
\pagenumbering{gobble}
%
% (Beskrivning saknas.)
\cleardoublepage
%
% Infoga innehållsförteckningen.
\tableofcontents
%
% Infoga förord och inledning.
\include{koncept/foerord}
\include{koncept/inledning}
%
\cleardoublepage
\pagenumbering{arabic}
\setcounter{page}{5}
%
% Infoga alla kapitel.
\input{koncept/inkludera-kapitel}
%
% Infoga litteraturförteckningen.
\input{koncept/litteratur}
%
% Här slutar numreringen av kapitel och börjar om med bokstäver för appendix.
\appendix
% Infoga alla appendix.
\input{koncept/inkludera-appendix}
%
\cleardoublepage
%
% Infoga sakregistret.
\printindex
%
\newcommand*\cleartoleftpage{
	\clearpage
	\ifodd\value{page}\hbox{}\newpage\fi
}
%
\cleartoleftpage
%
% Infoga baksidan.
\input{koncept/backpage}
%
% Här tar boken slut.
\end{document}
